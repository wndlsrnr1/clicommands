# Docker & Docker Compose ì¢…í•© ê°€ì´ë“œ

## 1. Docker ë„¤íŠ¸ì›Œí¬ ìƒì„± ë° ê´€ë¦¬

### ë„¤íŠ¸ì›Œí¬ ìƒì„±
```bash
# ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ ìƒì„±
docker network create my_network

# ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬ ìƒì„± (ì»¤ìŠ¤í…€ ì„¤ì •)
docker network create --driver bridge --subnet=172.18.0.0/16 my_bridge_network

# ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ (ìŠ¤ì›œ ëª¨ë“œìš©)
docker network create --driver overlay my_overlay_network
```

### ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬
```bash
# ë„¤íŠ¸ì›Œí¬ ëª©ë¡ í™•ì¸
docker network ls

# ë„¤íŠ¸ì›Œí¬ ìƒì„¸ ì •ë³´ í™•ì¸
docker network inspect my_network

# ë„¤íŠ¸ì›Œí¬ ì‚­ì œ
docker network rm my_network

# ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë„¤íŠ¸ì›Œí¬ ì •ë¦¬
docker network prune
```

## 2. Docker Composeë¡œ ì´ë¯¸ì§€ ìƒì„± ë° ì‹¤í–‰

### ê¸°ë³¸ ëª…ë ¹ì–´
```bash
# ì´ë¯¸ì§€ ë¹Œë“œ
docker compose build

# ìºì‹œ ë¬´ì‹œí•˜ê³  ë¹Œë“œ
docker compose build --no-cache

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ë¹Œë“œ
docker compose build [ì„œë¹„ìŠ¤ëª…]

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (ë°±ê·¸ë¼ìš´ë“œ)
docker compose up -d

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (í¬ê·¸ë¼ìš´ë“œ)
docker compose up

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker compose down

# ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker compose ps
```

### ì„œë¹„ìŠ¤ë³„ ê´€ë¦¬
```bash
# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì‹¤í–‰
docker compose up -d [ì„œë¹„ìŠ¤ëª…]

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì¤‘ì§€
docker compose stop [ì„œë¹„ìŠ¤ëª…]

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì¬ì‹œì‘
docker compose restart [ì„œë¹„ìŠ¤ëª…]

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì¬ë¹Œë“œ
docker compose build [ì„œë¹„ìŠ¤ëª…]
```

## 3. ì»¨í…Œì´ë„ˆ ì ‘ê·¼ ë° ê´€ë¦¬

### ì»¨í…Œì´ë„ˆ ì ‘ê·¼
```bash
# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†
docker compose exec [ì„œë¹„ìŠ¤ëª…] bash

# íŠ¹ì • ì‚¬ìš©ìë¡œ ì ‘ì†
docker compose exec -u root [ì„œë¹„ìŠ¤ëª…] bash

# ì»¨í…Œì´ë„ˆì—ì„œ ëª…ë ¹ì–´ ì‹¤í–‰
docker compose exec [ì„œë¹„ìŠ¤ëª…] [ëª…ë ¹ì–´]

# ì˜ˆì‹œ
docker compose exec django python manage.py migrate
docker compose exec mysql mysql -u root -p
docker compose exec redis redis-cli
```

### ë¡œê·¸ ê´€ë¦¬
```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸
docker compose logs

# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
docker compose logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸
docker compose logs [ì„œë¹„ìŠ¤ëª…]

# ë¡œê·¸ ë¼ì¸ ìˆ˜ ì œí•œ
docker compose logs --tail=100

# íŠ¹ì • ì‹œê°„ ì´í›„ ë¡œê·¸
docker compose logs --since="2024-01-01T00:00:00"
```

## 4. ì»¨í…Œì´ë„ˆ ë° ì´ë¯¸ì§€ ê´€ë¦¬

### ì»¨í…Œì´ë„ˆ ê´€ë¦¬
```bash
# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸
docker ps

# ëª¨ë“  ì»¨í…Œì´ë„ˆ í™•ì¸ (ì¤‘ì§€ëœ ê²ƒ í¬í•¨)
docker ps -a

# ì»¨í…Œì´ë„ˆ ê°•ì œ ì¤‘ì§€
docker stop [ì»¨í…Œì´ë„ˆID/ì´ë¦„]

# ì»¨í…Œì´ë„ˆ ê°•ì œ ì‚­ì œ
docker rm -f [ì»¨í…Œì´ë„ˆID/ì´ë¦„]

# ëª¨ë“  ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker stop $(docker ps -q)

# ëª¨ë“  ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker rm $(docker ps -aq)
```

### ì´ë¯¸ì§€ ê´€ë¦¬
```bash
# ì´ë¯¸ì§€ ëª©ë¡ í™•ì¸
docker images

# ì´ë¯¸ì§€ ì‚­ì œ
docker rmi [ì´ë¯¸ì§€ID/ì´ë¦„]

# ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ì •ë¦¬
docker image prune

# ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ
docker rmi $(docker images -q)
```

### ë³¼ë¥¨ ê´€ë¦¬
```bash
# ë³¼ë¥¨ ëª©ë¡ í™•ì¸
docker volume ls

# ë³¼ë¥¨ ìƒì„¸ ì •ë³´ í™•ì¸
docker volume inspect [ë³¼ë¥¨ëª…]

# ë³¼ë¥¨ ì‚­ì œ
docker volume rm [ë³¼ë¥¨ëª…]

# ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³¼ë¥¨ ì •ë¦¬
docker volume prune
```

## 5. ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ ë° ê´€ë¦¬

### ë„¤íŠ¸ì›Œí¬ ë‚´ ì»¨í…Œì´ë„ˆ ì ‘ê·¼
```bash
# ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ëœ ì»¨í…Œì´ë„ˆ í™•ì¸
docker network inspect [ë„¤íŠ¸ì›Œí¬ëª…]

# ì»¨í…Œì´ë„ˆë¥¼ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°
docker network connect [ë„¤íŠ¸ì›Œí¬ëª…] [ì»¨í…Œì´ë„ˆëª…]

# ì»¨í…Œì´ë„ˆë¥¼ ë„¤íŠ¸ì›Œí¬ì—ì„œ ë¶„ë¦¬
docker network disconnect [ë„¤íŠ¸ì›Œí¬ëª…] [ì»¨í…Œì´ë„ˆëª…]
```

### ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨
```bash
# ë„¤íŠ¸ì›Œí¬ ë‚´ ì»¨í…Œì´ë„ˆ ê°„ í†µì‹  í…ŒìŠ¤íŠ¸
docker compose exec [ì„œë¹„ìŠ¤ëª…] ping [ë‹¤ë¥¸ì„œë¹„ìŠ¤ëª…]

# ë„¤íŠ¸ì›Œí¬ ì„¤ì • í™•ì¸
docker compose exec [ì„œë¹„ìŠ¤ëª…] ip addr

# DNS í™•ì¸
docker compose exec [ì„œë¹„ìŠ¤ëª…] nslookup [ì„œë¹„ìŠ¤ëª…]
```

## 6. ì˜¤ë¥˜ í•¸ë“¤ë§ ëª…ë ¹ì–´

### ì¼ë°˜ì ì¸ ì˜¤ë¥˜ í•´ê²°
```bash
# ì»¨í…Œì´ë„ˆ ì¶©ëŒ í•´ê²°
docker compose down --remove-orphans
docker compose up -d

# í¬íŠ¸ ì¶©ëŒ í•´ê²°
netstat -tulpn | grep [í¬íŠ¸ë²ˆí˜¸]
lsof -i :[í¬íŠ¸ë²ˆí˜¸]

# ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì˜¤ë¥˜ í•´ê²°
docker volume ls
docker volume rm [ë³¼ë¥¨ëª…]
docker compose up -d

# ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ í•´ê²°
docker network prune
docker compose down
docker compose up -d
```

### ë””ë²„ê¹… ëª…ë ¹ì–´
```bash
# ì»¨í…Œì´ë„ˆ ìƒì„¸ ì •ë³´ í™•ì¸
docker inspect [ì»¨í…Œì´ë„ˆëª…]

# ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸
docker stats

# ì»¨í…Œì´ë„ˆ í”„ë¡œì„¸ìŠ¤ í™•ì¸
docker top [ì»¨í…Œì´ë„ˆëª…]

# ì»¨í…Œì´ë„ˆ íŒŒì¼ì‹œìŠ¤í…œ í™•ì¸
docker diff [ì»¨í…Œì´ë„ˆëª…]
```

### ì‹œìŠ¤í…œ ì •ë¦¬
```bash
# ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ ì •ë¦¬
docker system prune

# ëª¨ë“  ë¦¬ì†ŒìŠ¤ ê°•ì œ ì •ë¦¬
docker system prune -a --volumes

# Docker ì‹œìŠ¤í…œ ì •ë³´ í™•ì¸
docker system df
```

## 7. ìì£¼ ì‚¬ìš©í•˜ëŠ” ì¡°í•© ëª…ë ¹ì–´

```bash
# ì „ì²´ ì¬ì‹œì‘
docker compose down && docker compose up -d

# ë¡œê·¸ í™•ì¸ í›„ ì¬ì‹œì‘
docker compose logs --tail=50 && docker compose restart

# ë¹Œë“œ í›„ ì‹¤í–‰
docker compose build --no-cache && docker compose up -d

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì¬ì‹œì‘
docker compose restart [ì„œë¹„ìŠ¤ëª…] && docker compose logs -f [ì„œë¹„ìŠ¤ëª…]

# ë°±ì—… í›„ ì¬ì‹œì‘
docker compose exec [DBì„œë¹„ìŠ¤ëª…] [ë°±ì—…ëª…ë ¹ì–´] && docker compose restart
```

## 8. í”„ë¡œë•ì…˜ í™˜ê²½ ëª…ë ¹ì–´

```bash
# í”„ë¡œë•ì…˜ ì„¤ì •ìœ¼ë¡œ ì‹¤í–‰
docker compose -f docker-compose.prod.yml up -d

# ìŠ¤ì¼€ì¼ë§
docker compose up -d --scale [ì„œë¹„ìŠ¤ëª…]=3

# í—¬ìŠ¤ì²´í¬
docker compose ps | grep -v "Up"

# ë¡¤ë§ ì—…ë°ì´íŠ¸
docker compose pull && docker compose up -d
```

ì´ì œ ê·€ì—¬ìš´ ê³ ì–‘ì´ë¥¼ ì‚´ë ¤ì£¼ì„¸ìš”! ğŸ˜¸
